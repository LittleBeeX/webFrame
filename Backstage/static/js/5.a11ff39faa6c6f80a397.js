webpackJsonp([5],{Jgwa:function(t,e){},cYOX:function(t,e){},vwoC:function(t,e){},yK50:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("4YfN"),n=s.n(o),r=s("6iV/"),a=s.n(r),i=s("9rMa"),c=s("3Yup"),d={data:function(){return{searchInput:"",searchType:this.$t("homeVote.btn1"),addVoteInput:"",isShowDrawer:!1,isAddDrawer:!1,typeList:[{title:this.$t("homeVote.btn1"),vals:4},{title:this.$t("homeVote.btn2"),vals:0},{title:this.$t("homeVote.btn3"),vals:1},{title:this.$t("homeVote.btn4"),vals:2}],pStyle:{fontSize:"16px",color:"rgba(0,0,0,0.85)",lineHeight:"24px",display:"block",marginBottom:"16px"},voteList:[],tokenAll:0}},computed:n()({},Object(i.b)({Address:function(t){return t.web3.coinbase}})),methods:{addVote:function(){this.$router.push({path:"MintTransfer",query:{only:this.$route.query.only}}),this.$emit("menuActiveName",12)},takeVote:function(){var t=this;if(""!=this.addVoteInput){var e=this;this.$store.state.userInstance().methods.addVoteList(0,this.Address,this.Address,0,this.addVoteInput).send({from:this.Address,gasPrice:"40000000000"}).on("transactionHash",function(t){e.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:32}}),t("div",e.$t("tipMsg1"))])}})}).then(function(e){var s=e.events.createVote.returnValues.codes;t.$Spin.hide();var o={only:t.$route.query.only,type:0,content:t.addVoteInput,address:t.Address,keyname:s};t.$axios({method:"post",url:"/index.php/cn/home/node_su/meeting",data:a.a.stringify(o)}).then(function(e){return 0==e.data.state?(t.$Notice.success({title:t.$t("homeVote.tipMsg1")}),t.mountedRefreshList(),t.isAddDrawer=!t.isAddDrawer,t.addVoteInput="",!0):(t.$Notice.warning({title:t.$t("errorMsg5")}),t.$router.push({path:"/"}),!1)})})}else this.$Notice.warning({title:this.$t("homeVote.errorMsg7")})},userVote:function(t,e,s){var o=this,n=this,r=1==t;this.$store.state.userInstance().methods.setVoteList(s,r).send({from:this.Address,gasPrice:"40000000000"}).on("transactionHash",function(t){n.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:32}}),t("div",n.$t("tipMsg1"))])}})}).then(function(s){o.$Spin.hide();var n={only:o.$route.query.only,state:t,id:e,address:o.Address};o.$axios({method:"post",url:"/index.php/cn/home/node_su/vote",data:a.a.stringify(n)}).then(function(t){return 0==t.data.state?(o.$Notice.success({title:o.$t("homeVote.tipMsg2")}),o.changeSearchType(o.searchType),!0):(o.$Notice.warning({title:o.$t("errorMsg5")}),o.$router.push({path:"/"}),!1)})})},searchVote:function(t){this.returnTypeMsg(t),this.$route.query.only,this.Address,this.searchInput,this.returnTypeMsg(this.searchType)},changeSearchType:function(t){var e=4==this.returnTypeMsg(t)?0:1,s={only:this.$route.query.only,address:this.Address,state:this.returnTypeMsg(t),condition:e};this.searchList(s)},searchList:function(t){var e=this,s=t;this.$axios({method:"post",url:"/index.php/cn/home/node_se/meeting_list",data:a.a.stringify(s)}).then(function(t){if(0==t.data.state){for(var s=t.data.info,o=0;o<s.length;o++)s[o].start_time=c.a.timestampToTime(s[o].start_time),s[o].remnant=s[o].remnant>0?s[o].remnant:0,s[o].last_time=e.$t("homeVote.msg3_1")+s[o].remnant.toFixed(1)+e.$t("homeVote.msg3_2"),s[o].name=s[o].surname+s[o].name,s[o].id=s[o].id,s[o].no_proportion=Number(s[o].no_proportion),s[o].yes_proportion=Number(s[o].yes_proportion),s[o].btn_show=!1,0==s[o].state&&0==s[o].throw&&(s[o].btn_show=!0),s[o].state=e.returnTypeMsg(s[o].state),s[o].cnt=+(100*(Number(s[o].yes_cnt)+Number(s[o].no_cnt))/Number(t.data.cnt)).toFixed(2);return e.voteList=s,!0}return e.$Notice.warning({title:e.$t("errorMsg5")}),e.$router.push({path:"/"}),!1})},mountedRefreshList:function(){var t={only:this.$route.query.only,address:this.Address,state:0};this.searchList(t)},returnTypeMsg:function(t){switch(t){case this.$t("homeVote.btn2"):t=0;break;case this.$t("homeVote.btn3"):t=1;break;case this.$t("homeVote.btn4"):t=2;break;case this.$t("homeVote.btn1"):t=4;break;case"0":t=this.$t("homeVote.btn2");break;case"1":t=this.$t("homeVote.btn3");break;case"2":t=this.$t("homeVote.btn4");break;case"4":t=this.$t("homeVote.btn1")}return t}},created:function(){var t=this;this.$store.state.userInstance().methods.totalSupply().call().then(function(e){t.tokenAll=e/Math.pow(10,18),t.mountedRefreshList()})}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Breadcrumb",{staticClass:"bread"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("homeVote.msg0")))]),t._v(" "),s("div",{staticClass:"b_func"},[s("div",{staticClass:"searchForm"},[s("RadioGroup",{staticClass:"radio",on:{"on-change":function(e){t.changeSearchType(t.searchType)}},model:{value:t.searchType,callback:function(e){t.searchType=e},expression:"searchType"}},t._l(t.typeList,function(t){return s("Radio",{attrs:{label:t.title,value:t.vals}})}),1),t._v(" "),s("div",[s("Input",{staticStyle:{width:"300px"},attrs:{placeholder:t.$t("homeVote.msg1")},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}},[s("Button",{attrs:{slot:"append"},on:{click:function(e){t.searchVote(t.searchType)}},slot:"append"},[s("Icon",{attrs:{type:"ios-search",size:"16"}})],1)],1)],1)],1),t._v(" "),s("div",{staticClass:"addVote"},[s("Button",{attrs:{type:"primary",size:"large",icon:"md-barcode"},on:{click:function(e){t.isAddDrawer=!t.isAddDrawer}}},[t._v(t._s(t.$t("homeVote.btn5")))])],1)])]),t._v(" "),t.voteList.length>0?s("Row",t._l(t.voteList,function(e){return s("Col",{attrs:{xs:24,sm:12,lg:8}},[s("Card",{staticClass:"voteItem",attrs:{bordered:!1}},[s("p",{attrs:{slot:"title"},slot:"title"},[s("Tooltip",{attrs:{"max-width":"300",content:e.content,placement:"bottom-start"}},[s("p",{staticClass:"tooltip-msg"},[t._v(t._s(e.content))])])],1),t._v(" "),s("div",{staticClass:"msgBoard"},[s("p",[s("b",[t._v(t._s(t.$t("homeVote.msg2")))]),t._v(t._s(e.start_time))]),t._v(" "),s("p",[s("b",[t._v(t._s(t.$t("homeVote.msg3")))]),t._v(t._s(e.last_time))]),t._v(" "),s("p",[1==e.type?s("b",[t._v(t._s(t.$t("homeVote.msg4_1")))]):s("b",[t._v(t._s(t.$t("homeVote.msg4")))]),t._v(t._s(e.name))]),t._v(" "),s("p",[s("b",[t._v(t._s(t.$t("homeVote.msg5")))]),t._v(t._s(e.state))]),t._v(" "),s("p",[s("b",[t._v(t._s(t.$t("homeVote.msg6"))),s("span",[t._v("（"+t._s(t.$t("homeVote.msg6_1"))+t._s(e.quorum)+"%）")])]),t._v(" "),s("Progress",{attrs:{percent:e.cnt,status:"active"}})],1),t._v(" "),s("p",[s("b",[t._v(t._s(t.$t("homeVote.msg7"))),s("span",[t._v(t._s(t.$t("homeVote.msg7_1"))+t._s(e.support)+"%"+t._s(t.$t("homeVote.msg7_2")))])]),t._v(" "),s("Progress",{attrs:{percent:e.yes_proportion,status:"active"}})],1),t._v(" "),s("p",[s("b",[t._v(t._s(t.$t("homeVote.msg8")))]),t._v(" "),s("Progress",{staticClass:"warningProgress",attrs:{percent:e.no_proportion}})],1),t._v(" "),e.btn_show?s("div",{staticClass:"btn"},[s("Button",{attrs:{type:"success",size:"large",icon:"ios-checkmark-circle-outline"},on:{click:function(s){t.userVote(1,e.id,e.keyname)}}},[t._v(t._s(t.$t("homeVote.msg7")))]),t._v(" "),s("Button",{attrs:{type:"info",size:"large",icon:"ios-close-circle-outline"},on:{click:function(s){t.userVote(2,e.id,e.keyname)}}},[t._v(t._s(t.$t("homeVote.msg8")))])],1):t._e()])])],1)}),1):s("div",{staticClass:"mouldBoard"},[s("Card",{staticClass:"mouldItem",attrs:{bordered:!1}},[s("div",{staticClass:"msgBoard"},[s("p",[t._v(t._s(t.$t("homeVote.msg11")))]),t._v(" "),s("Button",{attrs:{type:"primary",size:"large",icon:"md-barcode"},on:{click:function(e){t.addVote()}}},[t._v(t._s(t.$t("homeVote.btn5")))])],1)])],1),t._v(" "),s("Drawer",{staticClass:"newVoteBoard",attrs:{title:t.$t("homeVote.msg9"),width:"350",closable:!1},model:{value:t.isAddDrawer,callback:function(e){t.isAddDrawer=e},expression:"isAddDrawer"}},[s("div",[s("p",[t._v(t._s(t.$t("homeVote.msg10")))]),t._v(" "),s("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},placeholder:t.$t("homeVote.msg10")},model:{value:t.addVoteInput,callback:function(e){t.addVoteInput=e},expression:"addVoteInput"}}),t._v(" "),s("div",{staticClass:"btn"},[s("Button",{attrs:{type:"success",long:""},on:{click:t.takeVote}},[t._v(t._s(t.$t("homeVote.btn5")))])],1)],1)])],1)},staticRenderFns:[]};var u=s("C7Lr")(d,h,!1,function(t){s("Jgwa"),s("cYOX"),s("vwoC")},"data-v-36b15702",null);e.default=u.exports}});
//# sourceMappingURL=5.a11ff39faa6c6f80a397.js.map