webpackJsonp([1],{"2Hut":function(t,e,n){var o=n("5Iw6"),r=Math.floor;t.exports=function(t){return!o(t)&&isFinite(t)&&r(t)===t}},"4Xi4":function(t,e,n){t.exports={default:n("M99A"),__esModule:!0}},Dn5W:function(t,e,n){var o=n("Grs1");o(o.S,"Number",{isInteger:n("2Hut")})},M99A:function(t,e,n){n("Dn5W"),t.exports=n("ZQXR").Number.isInteger},Qx6L:function(t,e){},Z9Fv:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("4Xi4"),r=n.n(o),a=n("6iV/"),s=n.n(a),l={data:function(){return{helpBox:!1,btnTypes:!0,tokenIdent:{support:"",quorum:"",duration:"",token_name:"",token_symbol:"",token_number:""},approve:{type:!1,text:"当前公司信息审核中"},ruleInline:{support:[{required:!0,message:"请输入支持占比",trigger:"blur"},{validator:u,trigger:"blur"}],quorum:[{required:!0,message:"请输入法定人数",trigger:"blur"},{validator:u,trigger:"blur"}],duration:[{required:!0,message:"请输入投票时间",trigger:"blur"},{validator:u,trigger:"blur"}],token_name:[{required:!0,message:"请输入令牌名称",trigger:"blur"}],token_symbol:[{required:!0,message:"请输入令牌符号",trigger:"blur"},{validator:p,trigger:"blur"}],token_number:[{required:!0,message:"请输入令牌数量",trigger:"blur"},{validator:i,trigger:"blur"}]}}},methods:{backConfig:function(){this.$router.push({path:"CompanyIdent",query:{only:this.$route.query.only}})},goTokenPayment:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var n={only:e.$route.query.only,support:e.tokenIdent.support,quorum:e.tokenIdent.quorum,duration:e.tokenIdent.duration,token_name:e.tokenIdent.token_name,token_symbol:e.tokenIdent.token_symbol,token_number:e.tokenIdent.token_number};e.$axios({method:"post",url:"/index.php/cn/home/node_su/token",data:s.a.stringify(n)}).then(function(t){0==t.data.state&&e.$router.push({path:"TokenPayment",query:{only:e.$route.query.only}})})}else e.$Notice.warning({title:"请填写完整的令牌设置信息！"})})}},created:function(){var t=this;if("undefined"!=this.$route.query.only){var e={address:this.$store.state.web3.coinbase,only:this.$route.query.only};this.$axios({method:"post",url:"/index.php/cn/home/node_se/company_individual",data:s.a.stringify(e)}).then(function(e){var n=e.data.info.company;0==e.data.state&&""!=n.token_name&&(t.tokenIdent.support=n.support,t.tokenIdent.quorum=n.quorum,t.tokenIdent.duration=n.duration,t.tokenIdent.token_name=n.token_name,t.tokenIdent.token_symbol=n.token_symbol,t.tokenIdent.token_number=n.token_number,0!=n.state&&(t.btnTypes=!1))})}else this.$Notice.warning({title:"组织名称不能为空！"}),this.$router.push({path:"/"})}},i=function(t,e,n){r()(+e)?n():n(new Error("请输入数字值"))},u=function(t,e,n){r()(+e)?e>100||e<0?n(new Error("数值应为1-100之间")):n():n(new Error("请输入数字值"))},d=new RegExp("^[A-Z]+$"),p=function(t,e,n){d.test(e)?n():n(new Error("请输入大写英文字母"))},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-board"},[n("div",{staticClass:"inner"},[n("h3",[t._v("令牌设置"),n("Icon",{attrs:{type:"ios-help-circle-outline",color:"#2d8cf0",size:"22"},on:{click:function(e){t.helpBox=!t.helpBox}}})],1),t._v(" "),n("div",[n("Form",{ref:"tokenIdent",attrs:{model:t.tokenIdent,"label-position":"left","label-width":75,inline:"",rules:t.ruleInline}},[n("FormItem",{attrs:{label:"支持占比",prop:"support"}},[n("Input",{attrs:{size:"large",placeholder:"50"},model:{value:t.tokenIdent.support,callback:function(e){t.$set(t.tokenIdent,"support",e)},expression:"tokenIdent.support"}},[n("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1),t._v(" "),n("FormItem",{attrs:{label:"法定人数",prop:"quorum"}},[n("Input",{attrs:{size:"large",placeholder:"15"},model:{value:t.tokenIdent.quorum,callback:function(e){t.$set(t.tokenIdent,"quorum",e)},expression:"tokenIdent.quorum"}},[n("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1),t._v(" "),n("FormItem",{attrs:{label:"投票时间",prop:"duration"}},[n("Input",{attrs:{size:"large",placeholder:"24"},model:{value:t.tokenIdent.duration,callback:function(e){t.$set(t.tokenIdent,"duration",e)},expression:"tokenIdent.duration"}},[n("span",{attrs:{slot:"append"},slot:"append"},[t._v("H")])])],1),t._v(" "),n("FormItem",{attrs:{label:"令牌名称",prop:"token_name"}},[n("Input",{attrs:{size:"large",placeholder:"请输入令牌名称"},model:{value:t.tokenIdent.token_name,callback:function(e){t.$set(t.tokenIdent,"token_name",e)},expression:"tokenIdent.token_name"}})],1),t._v(" "),n("FormItem",{attrs:{label:"令牌符号",prop:"token_symbol"}},[n("Input",{attrs:{size:"large",placeholder:"请输入令牌符号"},model:{value:t.tokenIdent.token_symbol,callback:function(e){t.$set(t.tokenIdent,"token_symbol",e)},expression:"tokenIdent.token_symbol"}})],1),t._v(" "),n("FormItem",{attrs:{label:"令牌数量",prop:"token_number"}},[n("Input",{attrs:{size:"large",placeholder:"请输入令牌数量"},model:{value:t.tokenIdent.token_number,callback:function(e){t.$set(t.tokenIdent,"token_number",e)},expression:"tokenIdent.token_number"}})],1)],1),t._v(" "),t.btnTypes?n("div",{staticClass:"btn-con"},[n("Button",{staticClass:"fl",attrs:{type:"primary"},on:{click:function(e){t.backConfig()}}},[n("Icon",{attrs:{type:"ios-arrow-back"}}),t._v("\n\t\t\t\t\t上一步\n\t\t\t\t")],1),t._v(" "),n("Button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(e){t.goTokenPayment("tokenIdent")}}},[t._v("\n\t\t\t\t\t下一步\n\t\t\t\t\t"),n("Icon",{attrs:{type:"ios-arrow-forward"}})],1)],1):t._e()],1)]),t._v(" "),n("Modal",{attrs:{title:"令牌设置","ok-text":"OK","class-name":"vertical-center-modal","cancel-text":"Cancel"},model:{value:t.helpBox,callback:function(e){t.helpBox=e},expression:"helpBox"}},[n("p",[t._v("支持占比：设置公司决议的投票占比，必须高于此占比才能通过决议")]),t._v(" "),n("p",[t._v("法定人数：设置公司决议的人数占比，必须高于此占比才能通过决议")]),t._v(" "),n("p",[t._v("持续时间：设置发起一次决议的投票有效时间，必须在设置的时间范围内进行投票")]),t._v(" "),n("p",{staticClass:"tipMsg",attrs:{slot:"footer"},slot:"footer"},[t._v("令牌设置成功后无法进行修改，因此请认真填写")])])],1)},staticRenderFns:[]};var m=n("C7Lr")(l,c,!1,function(t){n("a0JH"),n("Qx6L")},"data-v-26502ee4",null);e.default=m.exports},a0JH:function(t,e){}});
//# sourceMappingURL=1.993d8591a343a3f70bfe.js.map