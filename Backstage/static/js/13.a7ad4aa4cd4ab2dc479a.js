webpackJsonp([13],{Vjjf:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("4YfN"),r=s.n(n),a=s("9rMa"),i=s("6iV/"),o=s.n(i),d={data:function(){return{mintAddress:"",mintNumber:0,transferAddress:"",transferNumber:0,allTokenNum:0,addressList:[]}},computed:r()({},Object(a.b)({Address:function(t){return t.web3.coinbase}}),{mintCode:function(){return 0==this.mintNumber||NaN==this.mintNumber?"股权占比 0 %":"股权占比 "+(100*this.mintNumber/Number(this.allTokenNum+this.mintNumber)).toFixed(2)+" %"},transferCode:function(){return 0==this.transferNumber||NaN==this.transferNumber?"股权占比 0 %":"股权占比 "+(100*this.transferNumber/Number(this.allTokenNum)).toFixed(2)+" %"}}),methods:{balanceof:function(){this.$store.state.userInstance().methods.totalSupply().call({from:this.Address}).then(function(t){console.log(t)})},mint:function(t,e){var s=this;if(!/(^[1-9]\d*$)/.test(e))return this.$Notice.warning({title:"TOKEN数量应为正整数！"}),!1;var n=this;this.$store.state.userInstance().methods.getPosition(t).call().then(function(r){0!=r?s.$store.state.userInstance().methods.addVoteList(1,s.Address,t,e,"给"+t+"增发"+e+"枚Token").send({from:s.Address,gasPrice:"40000000000"}).on("transactionHash",function(t){n.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:32}}),t("div","正在处理")])}})}).then(function(n){var r=n.events.createVote.returnValues.codes;s.$Spin.hide(),s.takeVote(t,1,e,"给"+t+"增发"+e+"枚Token",r)}):s.$Notice.warning({title:"受让方需通过KYC认证！"})})},transfer:function(t,e){var s=this;if(!/(^[1-9]\d*$)/.test(e))return this.$Notice.warning({title:"TOKEN数量应为正整数！"}),!1;var n=this;this.$store.state.userInstance().methods.getPosition(t).call().then(function(r){0!=r?s.$store.state.userInstance().methods.addVoteList(2,s.Address,t,e,"给"+t+"转让"+e+"枚Token").send({from:s.Address,gasPrice:"40000000000"}).on("transactionHash",function(t){n.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:32}}),t("div","正在处理")])}})}).then(function(n){var r=n.events.createVote.returnValues.codes;s.$Spin.hide(),s.takeVote(t,2,e,"给"+t+"转让"+e+"枚Token",r)}):s.$Notice.warning({title:"受让方需通过KYC认证！"})})},takeVote:function(t,e,s,n,r){var a=this,i={only:this.$route.query.only,type:e,content:n,address:this.Address,target:t,number:s,keyname:r};this.$axios({method:"post",url:"/index.php/cn/home/node_su/meeting",data:o.a.stringify(i)}).then(function(t){return 0==t.data.state?(a.$Notice.success({title:"会议提交成功！"}),a.$router.push({path:"VirtualBoardroom",query:{only:a.$route.query.only}}),a.$emit("menuActiveName",13),!0):(a.$Notice.warning({title:"无当前组织信息！"}),a.$router.push({path:"/"}),!1)})}},created:function(){var t=this,e={only:this.$route.query.only};this.$axios({method:"post",url:"/index.php/cn/home/node_se/chain_list",data:o.a.stringify(e)}).then(function(e){if(0==e.data.state){for(var s=e.data.info,n=[],r=0;r<s.length;r++)s[r].address!=t.Address&&n.push({address:s[r].address,name:s[r].surname+s[r].name});return t.addressList=n,!0}return t.$Notice.warning({title:"无当前组织信息！"}),t.$router.push({path:"/"}),!1}),this.$store.state.userInstance().methods.totalSupply().call().then(function(e){t.allTokenNum=e/Math.pow(10,18)})}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Breadcrumb",{staticClass:"bread"},[s("div",{staticClass:"title"},[t._v("增发和转让")])]),t._v(" "),s("Row",[s("Col",{attrs:{span:"24"}},[s("Card",{staticClass:"transfer",attrs:{bordered:!1}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("股权转让")]),t._v(" "),s("div",{staticClass:"msgBoard"},[s("p",[s("b",[t._v("转让方地址")]),t._v(t._s(t.Address))]),t._v(" "),s("p",[s("b",[t._v("受让方地址")]),t._v(" "),s("Select",{staticStyle:{width:"500px"},attrs:{size:"large",placeholder:"请选择受让方地址"},model:{value:t.transferAddress,callback:function(e){t.transferAddress=e},expression:"transferAddress"}},t._l(t.addressList,function(e,n){return s("Option",{key:n,attrs:{value:e.address,label:e.address}},[s("span",[t._v(t._s(e.address))]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#ccc"}},[t._v(t._s(e.name))])])}),1)],1),t._v(" "),s("p",[s("b",[t._v("转让数量")]),t._v(" "),s("InputNumber",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入转发数量"},model:{value:t.transferNumber,callback:function(e){t.transferNumber=e},expression:"transferNumber"}}),t._v(" "),s("span",{staticClass:"nums"},[t._v(t._s(t.transferCode))])],1),t._v(" "),s("div",{staticClass:"btn"},[s("Button",{attrs:{type:"primary",size:"large",icon:"md-git-compare"},on:{click:function(e){t.transfer(t.transferAddress,t.transferNumber)}}},[t._v("发起决议")])],1)])])],1),t._v(" "),s("Col",{attrs:{span:"24"}},[s("Card",{staticClass:"mint",attrs:{bordered:!1}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("股权增发")]),t._v(" "),s("div",{staticClass:"msgBoard"},[s("p",[s("b",[t._v("代表方地址")]),t._v(t._s(t.Address))]),t._v(" "),s("p",[s("b",[t._v("受让方地址")]),t._v(" "),s("Select",{staticStyle:{width:"500px",height:"34px"},attrs:{size:"large",placeholder:"请选择受让方地址"},model:{value:t.mintAddress,callback:function(e){t.mintAddress=e},expression:"mintAddress"}},t._l(t.addressList,function(e,n){return s("Option",{key:n,attrs:{value:e.address,label:e.address}},[s("span",[t._v(t._s(e.address))]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#ccc"}},[t._v(t._s(e.name))])])}),1)],1),t._v(" "),s("p",[s("b",[t._v("增发数量")]),t._v(" "),s("InputNumber",{staticStyle:{width:"500px",height:"34px"},attrs:{placeholder:"请输入增发数量"},model:{value:t.mintNumber,callback:function(e){t.mintNumber=e},expression:"mintNumber"}}),t._v(" "),s("span",{staticClass:"nums"},[t._v(t._s(t.mintCode))])],1),t._v(" "),s("div",{staticClass:"btn"},[s("Button",{attrs:{type:"primary",size:"large",icon:"md-git-compare"},on:{click:function(e){t.mint(t.mintAddress,t.mintNumber)}}},[t._v("发起决议")])],1)])])],1)],1)],1)},staticRenderFns:[]};var l=s("C7Lr")(d,c,!1,function(t){s("sowB")},"data-v-27b47610",null);e.default=l.exports},sowB:function(t,e){}});
//# sourceMappingURL=13.a7ad4aa4cd4ab2dc479a.js.map