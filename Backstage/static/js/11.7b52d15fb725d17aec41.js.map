{"version":3,"sources":["webpack:///src/page/index/TokenPayment.vue","webpack:///./src/page/index/TokenPayment.vue?b442","webpack:///./src/page/index/TokenPayment.vue"],"names":["TokenPayment","data","balanceOf","approveGetVal","approveSetVal","orderNum","computed","extends_default","Object","vuex_esm","Address","state","web3","coinbase","methods","goPay","_this2","this","_this","paycode","String","Math","pow","split","slice","join","$store","tokenInstance","transferFrom","send","from","on","receipt","$Spin","show","then","result","hide","address","only","$route","query","jiaoyi_address","transactionHash","$axios","method","url","lib_default","a","stringify","response","$Notice","warning","title","goApprove","_this3","mint","contract","number","allowance","_this4","call","balanceof","_this5","getOrderNum","_this6","info","money","$router","push","path","mounted","index_TokenPayment","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","staticStyle","width","attrs","size","model","value","callback","$$v","expression","type","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.7b52d15fb725d17aec41.js","sourcesContent":["<template>\r\n\t<div class=\"index-board\">\r\n\t\t<div class=\"approve\">\r\n\t\t\t<div class=\"content-describe\">\r\n\t\t\t\t您需要授权一定量的LT用于支付<br/>\r\n\t\t\t\t如果剩余额度小于支付额度，将支付失败<br>\r\n\t\t\t\t剩余Token额度：{{balanceOf}} LT<br>\r\n\t\t\t\t剩余授权额度：{{approveGetVal}} LT<br>\r\n\t\t\t\t设置授权额度：<Input v-model=\"approveSetVal\" size=\"large\" style=\"width: 150px\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"btn-con\">\r\n\t\t\t\t<Button type=\"primary\" size=\"large\" @click=\"goApprove\">授权</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"payment\">\r\n\t\t\t<div class=\"content-describe\">\r\n\t\t\t\t您的自治组织准备好了！<br/>\r\n\t\t\t\t现在需要您支付{{orderNum}}LT，<br/>我们将审核您已提交的信息，审核通过后，<br/>您将在LittleBeeX上治理您的公司！\r\n\t\t\t</div>\r\n\t\t\t<div class=\"btn-con\">\r\n\t\t\t\t<Button type=\"primary\" size=\"large\" @click=\"goPay\">支付LT</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {mapState} from 'vuex'\r\n\timport {tokenAddress} from '@/util/constants/contract'\r\n\timport Qs from 'qs'\r\n\texport default {\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tbalanceOf: 0,\r\n\t\t\t\tapproveGetVal: 0,\r\n\t\t\t\tapproveSetVal: 0,\r\n\t\t\t\torderNum: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tAddress: state => state.web3.coinbase\r\n\t\t\t})\r\n\t\t},\t\r\n\t\tmethods:{\r\n\t\t\tgoPay(){\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tconst paycode = \"\" + this.orderNum + String(10 ** 18).split(\"\").slice(1).join(\"\")\r\n\t\t\t\tlet masterAddress = \"0x79793BE2287e05490058acb17513B2BfAcdfe070\"\r\n\t\t\t\tthis.$store.state.tokenInstance().methods.transferFrom(this.Address, masterAddress, paycode).send({\r\n\t\t\t\t\tfrom: this.Address\r\n\t\t\t\t}).on('transactionHash',function( receipt){\r\n\t\t\t\t\t _this.$Spin.show();\r\n\t\t\t\t}).then(result => {\r\n\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\"address\": this.Address,\r\n\t\t\t\t\t\t\"only\": this.$route.query.only,\r\n\t\t\t\t\t\t\"jiaoyi_address\":result.transactionHash\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.$axios({\r\n\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\turl: '/index.php/cn/home/node_su/order',\r\n\t\t\t\t\t\tdata: Qs.stringify(data)\r\n\t\t\t\t\t}).then((response) => {\r\n\t\t\t\t\t\tthis.$Notice.warning({\r\n\t\t\t\t\t\t\ttitle: '操作成功！等待人员审核'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}) \r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoApprove(){\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tconst paycode = this.approveSetVal == 0 ? 0 : \"\" + this.approveSetVal + String(10 ** 18).split(\"\").slice(1).join(\"\")\r\n\t\t\t\tthis.$store.state.tokenInstance().methods.mint(tokenAddress, \"2000000000000000000000\").send({\r\n\t\t\t\t\tfrom: this.Address\r\n\t\t\t\t}).on('transactionHash',function(number, receipt){\r\n\t\t\t\t\t_this.$Spin.show();\r\n\t\t\t\t}).then(result => {\r\n\t\t\t\t\tthis.$Notice.warning({\r\n\t\t\t\t\t\ttitle: '授权成功！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.$Spin.hide();\r\n\t\t\t\t\tthis.approveGetVal = this.approveSetVal\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tallowance(){\r\n\t\t\t\tthis.$store.state.tokenInstance().methods.allowance(this.Address, tokenAddress).call({\r\n\t\t\t\t\tfrom: this.Address\r\n\t\t\t\t}).then(result => {\r\n\t\t\t\t\tthis.approveGetVal = result / 10 ** 18\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tbalanceof(){\r\n\t\t\t\tthis.$store.state.tokenInstance().methods.balanceOf(this.Address).call({\r\n\t\t\t\t\tfrom: this.Address\r\n\t\t\t\t}).then(result => {\r\n\t\t\t\t\tthis.balanceOf = result / 10 ** 18\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetOrderNum(){\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t\"address\": this.Address,\r\n\t\t\t\t\t\"only\": this.$route.query.only\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios({\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\turl: '/index.php/cn/home/node_se/order',\r\n\t\t\t\t\tdata: Qs.stringify(data)\r\n\t\t\t\t}).then((response) => {\r\n\t\t\t\t\tif(response.data.state == 0){\r\n\t\t\t\t\t\tthis.orderNum = response.data.info.money\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$Notice.warning({\r\n\t\t\t\t\t\t\ttitle: '无当前组织信息！'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\tpath:'/'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}) \r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.allowance()\r\n\t\t\tthis.balanceof()\r\n\t\t\tthis.getOrderNum()\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped lang=\"stylus\">\r\n\t.index-board\r\n\t\tpadding: 80px 100 !important;\r\n\t\theight: 570px !important;\r\n\t\tdisplay: flex;\r\n\t\tdisplay: -webkit-flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tbox-shadow: none !important;\r\n\t\tbackground: transparent !important;\r\n\t\t.approve,.payment\r\n\t\t\tdisplay: flex;\r\n\t\t\tdisplay: -webkit-flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\tmin-height: 400px;\r\n\t\t\tbox-shadow: 0 2px 7px rgba(0,0,0,0.15);\r\n\t\t\tpadding: 50px 70px;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\t.content-describe\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tline-height: 36px;\r\n\t\t\t.btn-con\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tbutton\r\n\t\t\t\t\tpadding: 8px 40px;\r\n\t\t\t\t\tfont-size: 16px;\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/page/index/TokenPayment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"index-board\"},[_c('div',{staticClass:\"approve\"},[_c('div',{staticClass:\"content-describe\"},[_vm._v(\"\\n\\t\\t\\t您需要授权一定量的LT用于支付\"),_c('br'),_vm._v(\"\\n\\t\\t\\t如果剩余额度小于支付额度，将支付失败\"),_c('br'),_vm._v(\"\\n\\t\\t\\t剩余Token额度：\"+_vm._s(_vm.balanceOf)+\" LT\"),_c('br'),_vm._v(\"\\n\\t\\t\\t剩余授权额度：\"+_vm._s(_vm.approveGetVal)+\" LT\"),_c('br'),_vm._v(\"\\n\\t\\t\\t设置授权额度：\"),_c('Input',{staticStyle:{\"width\":\"150px\"},attrs:{\"size\":\"large\"},model:{value:(_vm.approveSetVal),callback:function ($$v) {_vm.approveSetVal=$$v},expression:\"approveSetVal\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"btn-con\"},[_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.goApprove}},[_vm._v(\"授权\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"payment\"},[_c('div',{staticClass:\"content-describe\"},[_vm._v(\"\\n\\t\\t\\t您的自治组织准备好了！\"),_c('br'),_vm._v(\"\\n\\t\\t\\t现在需要您支付\"+_vm._s(_vm.orderNum)+\"LT，\"),_c('br'),_vm._v(\"我们将审核您已提交的信息，审核通过后，\"),_c('br'),_vm._v(\"您将在LittleBeeX上治理您的公司！\\n\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"btn-con\"},[_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.goPay}},[_vm._v(\"支付LT\")])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-65e4d4ad\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/page/index/TokenPayment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-65e4d4ad\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./TokenPayment.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./TokenPayment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./TokenPayment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-65e4d4ad\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./TokenPayment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-65e4d4ad\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/index/TokenPayment.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}