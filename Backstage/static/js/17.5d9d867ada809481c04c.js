webpackJsonp([17],{FoKo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),n=s.n(i),a=s("9rMa"),r=s("6iV/"),o=s.n(r),d={data:function(){return{tipMsg:2,balanceOf:0,approveGetVal:0,approveSetVal:0,orderNum:0,isClick:!0}},computed:n()({},Object(a.b)({Address:function(t){return t.web3.coinbase}})),methods:{goPay:function(){var t=this;if(this.approveGetVal>=this.orderNum)if(this.balanceOf>=this.orderNum){var e=this,s=""+this.orderNum+String(Math.pow(10,18)).split("").slice(1).join("");this.$store.state.tokenInstance().methods.transferFrom(this.Address,"0xDBD4c2a85423124a2Da3A656A455df4D6C873979",s).send({from:this.Address,gasPrice:"40000000000"}).on("transactionHash",function(t){e.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:32}}),t("div",e.$t("tipMsg1"))])}})}).then(function(e){t.$Spin.hide(),t.$Spin.hide();var s={address:t.Address,only:t.$route.query.only,jiaoyi_address:e.transactionHash};t.$axios({method:"post",url:"/index.php/cn/home/node_su/order",data:o.a.stringify(s)}).then(function(e){t.$Notice.success({title:t.$t("indePay.tipMsg1")}),t.isClick=!1,t.allowance(),t.balanceof(),t.$router.push({path:"/"})})})}else this.$Notice.warning({title:this.$t("indePay.errorMsg1")});else this.$Notice.warning({title:this.$t("indePay.errorMsg2")})},goApprove:function(){var t=this,e=this,s=0==this.approveSetVal?0:""+this.approveSetVal+String(Math.pow(10,18)).split("").slice(1).join("");this.$store.state.tokenInstance().methods.approve(this.Address,s).send({from:this.Address,gasPrice:"40000000000"}).on("transactionHash",function(t,s){e.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:32}}),t("div",e.$t("tipMsg1"))])}})}).then(function(e){t.$Notice.success({title:t.$t("indePay.tipMsg2")}),t.$Spin.hide(),t.approveGetVal=t.approveSetVal,t.approveSetVal=0})},allowance:function(){var t=this;this.$store.state.tokenInstance().methods.allowance(this.Address,this.Address).call({from:this.Address}).then(function(e){t.approveGetVal=e/Math.pow(10,18)})},balanceof:function(){var t=this;this.$store.state.tokenInstance().methods.balanceOf(this.Address).call({from:this.Address}).then(function(e){t.balanceOf=(e/Math.pow(10,18)).toFixed(0)})},getOrderNum:function(){var t=this,e={address:this.Address,only:this.$route.query.only};this.$axios({method:"post",url:"/index.php/cn/home/node_se/order",data:o.a.stringify(e)}).then(function(e){0==e.data.state?(t.tipMsg=e.data.info.type,t.orderNum=e.data.info.money,t.approveSetVal=e.data.info.money):(t.$Notice.warning({title:t.$t("errorMsg8")}),t.$router.push({path:"/"}))})}},mounted:function(){this.allowance(),this.balanceof(),this.getOrderNum()}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index-board"},[s("div",{staticClass:"approve"},[s("div",{staticClass:"content-describe"},[t._v("\n\t\t\t"+t._s(t.$t("indePay.msg0"))+t._s(t.orderNum)+"LT"+t._s(t.$t("indePay.msg1"))),s("br"),t._v("\n\t\t\t"+t._s(t.$t("indePay.msg2"))),s("br"),t._v("\n\t\t\t"+t._s(t.$t("indePay.msg3"))+":"+t._s(t.balanceOf)+" LT"),s("br"),t._v("\n\t\t\t"+t._s(t.$t("indePay.msg4"))+"："+t._s(t.approveGetVal)+" LT"),s("br"),t._v(" "),s("div",{staticClass:"center"},[t._v("\n\t\t\t\t"+t._s(t.$t("indePay.msg5"))+"："),s("Input",{staticStyle:{width:"150px"},attrs:{size:"large"},model:{value:t.approveSetVal,callback:function(e){t.approveSetVal=e},expression:"approveSetVal"}},[s("span",{attrs:{slot:"append"},slot:"append"},[t._v("LT")])])],1)]),t._v(" "),s("div",{staticClass:"btn-con"},[s("Button",{attrs:{type:"primary",size:"large"},on:{click:t.goApprove}},[t._v(t._s(t.$t("indePay.btn1")))])],1)]),t._v(" "),s("div",{staticClass:"payment"},[2==t.tipMsg?s("div",{staticClass:"content-describe"},[t._v("\n\t\t\t"+t._s(t.$t("indePay.msg6"))),s("br"),t._v("\n\t\t\t"+t._s(t.$t("indePay.msg7"))+t._s(t.orderNum)+"LT，"),s("br"),t._v(t._s(t.$t("indePay.msg8"))),s("br"),t._v(t._s(t.$t("indePay.msg9"))+"\n\t\t")]):s("div",{staticClass:"content-describe"},[t._v("\n\t\t\t"+t._s(t.$t("indePay.msg6_1"))),s("br"),t._v("\n\t\t\t"+t._s(t.$t("indePay.msg7"))+t._s(t.orderNum)+"LT，"),s("br"),t._v(t._s(t.$t("indePay.msg8"))),s("br"),t._v(t._s(t.$t("indePay.msg9_1"))+"\n\t\t")]),t._v(" "),s("div",{staticClass:"btn-con"},[t.isClick?s("Button",{attrs:{type:"primary",size:"large"},on:{click:t.goPay}},[t._v(t._s(t.$t("indePay.btn2")))]):s("Button",{attrs:{type:"primary",size:"large",disabled:!0}},[t._v(t._s(t.$t("indePay.btn3")))])],1)])])},staticRenderFns:[]};var p=s("C7Lr")(d,c,!1,function(t){s("iixX")},"data-v-3486f0fc",null);e.default=p.exports},iixX:function(t,e){}});
//# sourceMappingURL=17.5d9d867ada809481c04c.js.map